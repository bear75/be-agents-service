<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Agent Service</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .dashboard-container {
      max-width: 1800px;
      margin: 0 auto;
      padding: 20px;
    }

    .nav-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding: 20px 30px;
      background: var(--glass-white);
      backdrop-filter: blur(var(--glass-blur)) saturate(180%);
      border: 2px solid var(--glass-border);
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-lg);
    }

    .nav-header h1 {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 800;
    }

    .nav-links {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .nav-link {
      padding: 10px 20px;
      background: rgba(102, 126, 234, 0.1);
      border: 2px solid rgba(102, 126, 234, 0.2);
      border-radius: 8px;
      color: var(--text-primary);
      text-decoration: none;
      font-weight: 600;
      transition: all 0.2s;
    }

    .nav-link:hover {
      background: rgba(102, 126, 234, 0.2);
      transform: translateY(-2px);
    }

    .nav-link.active {
      background: #667eea;
      color: white;
      border-color: #667eea;
    }

    .overview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .overview-card {
      background: var(--glass-light);
      backdrop-filter: blur(15px);
      border: 2px solid var(--glass-border);
      border-radius: var(--border-radius);
      padding: 25px;
      box-shadow: var(--shadow-md);
      transition: all 0.3s;
      text-decoration: none;
      color: inherit;
      display: block;
    }

    .overview-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
      border-color: rgba(102, 126, 234, 0.4);
    }

    .overview-card.management { border-left: 4px solid #f59e0b; }
    .overview-card.engineering { border-left: 4px solid #667eea; }
    .overview-card.marketing { border-left: 4px solid #48bb78; }
    .overview-card.rl { border-left: 4px solid #9f7aea; }
    .overview-card.kanban { border-left: 4px solid #38b2ac; }
    .overview-card.docs { border-left: 4px solid #ed8936; }
    .overview-card.settings { border-left: 4px solid #718096; }

    .overview-card h3 {
      margin: 0 0 10px 0;
      font-size: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .overview-card .stat {
      font-size: 36px;
      font-weight: 800;
      margin: 10px 0;
    }

    .overview-card .desc {
      font-size: 13px;
      color: var(--text-secondary);
      margin: 0;
    }

    .section-title {
      font-size: 24px;
      font-weight: 700;
      margin: 40px 0 20px;
      color: var(--text-primary);
    }

    .quick-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
    }

    .quick-stat {
      background: var(--glass-light);
      border: 2px solid var(--glass-border);
      border-radius: var(--border-radius);
      padding: 20px;
      text-align: center;
    }

    .quick-stat .value {
      font-size: 28px;
      font-weight: 800;
      color: var(--text-primary);
    }

    .quick-stat .label {
      font-size: 12px;
      color: var(--text-secondary);
      margin-top: 4px;
      text-transform: uppercase;
    }
  </style>
</head>
<body>
  <div class="dashboard-container">
    <div class="nav-header">
      <h1 style="margin: 0;"><a href="/" style="color: inherit; text-decoration: none;">üìä Dashboard</a></h1>
      <div class="nav-links">
        <a href="/" class="nav-link active">Dashboard</a>
        <a href="/management-team.html" class="nav-link">Management (4)</a>
        <a href="/engineering.html" class="nav-link">Engineering (10)</a>
        <a href="/sales-marketing.html" class="nav-link">Sales & Marketing (10)</a>
        <a href="/rl-dashboard.html" class="nav-link">RL</a>
        <a href="/kanban.html" class="nav-link">üìã Task Board</a>
        <a href="/commands.html" class="nav-link">Docs</a>
        <a href="/settings.html" class="nav-link">‚öôÔ∏è Settings</a>
      </div>
    </div>

    <h2 class="section-title">Overview</h2>
    <div class="quick-stats" id="quick-stats">
      <div class="quick-stat">
        <div class="value" id="total-agents">‚Äî</div>
        <div class="label">Total Agents</div>
      </div>
      <div class="quick-stat">
        <div class="value" id="eng-count">10</div>
        <div class="label">Engineering</div>
      </div>
      <div class="quick-stat">
        <div class="value" id="mkt-count">10</div>
        <div class="label">Sales & Marketing</div>
      </div>
      <div class="quick-stat">
        <div class="value" id="mgmt-count">4</div>
        <div class="label">Management</div>
      </div>
      <div class="quick-stat">
        <div class="value" id="active-sessions">‚Äî</div>
        <div class="label">Active Sessions</div>
      </div>
    </div>

    <h2 class="section-title">Quick Links</h2>
    <div class="overview-grid">
      <a href="/management-team.html" class="overview-card management">
        <h3>üëî Management Team</h3>
        <div class="stat" id="mgmt-stat">4</div>
        <p class="desc">CEO, CPO/CTO, CMO/CSO, HR Agent Lead ‚Äî org chart, directives, evaluations</p>
      </a>
      <a href="/engineering.html" class="overview-card engineering">
        <h3>‚öôÔ∏è Engineering</h3>
        <div class="stat" id="eng-stat">10</div>
        <p class="desc">Backend, Frontend, Infrastructure, DB Architect, UX Designer, Docs Expert, Levelup, Verification, Senior Reviewer, Orchestrator</p>
      </a>
      <a href="/sales-marketing.html" class="overview-card marketing">
        <h3>üìä Sales & Marketing</h3>
        <div class="stat" id="mkt-stat">10</div>
        <p class="desc">Jarvis, Shuri, Fury, Vision, Loki, Quill, Wanda, Pepper, Friday, Wong ‚Äî campaigns, leads, content</p>
      </a>
      <a href="/rl-dashboard.html" class="overview-card rl">
        <h3>üß† RL Dashboard</h3>
        <div class="stat">‚Äî</div>
        <p class="desc">Reinforcement learning, experiments, patterns, agent performance insights</p>
      </a>
      <a href="/kanban.html" class="overview-card kanban">
        <h3>üìã Task Board</h3>
        <div class="stat">‚Äî</div>
        <p class="desc">All teams, agents, tasks, status, schedules, priority files ‚Äî Kanban view</p>
      </a>
      <a href="/engineering.html?project=ess-fsr" class="overview-card" style="border-left: 4px solid #38b2ac;">
        <h3>üìÖ ESS+FSR Integration</h3>
        <div class="stat">Sprint 1</div>
        <p class="desc">Dual-model scheduling (ESS+FSR). Quick start: Load preset ‚Üí Start Job</p>
      </a>
      <a href="/commands.html" class="overview-card docs">
        <h3>üìö Docs & Commands</h3>
        <div class="stat">‚Äî</div>
        <p class="desc">API reference, command palette, workflows, setup guides</p>
      </a>
      <a href="/settings.html" class="overview-card settings">
        <h3>‚öôÔ∏è Settings</h3>
        <div class="stat">‚Äî</div>
        <p class="desc">Integrations, repositories, environment configuration</p>
      </a>
    </div>
  </div>

  <script>
    async function loadOverview() {
      try {
        const [perfRes, sessionsRes] = await Promise.all([
          fetch('/api/rl/agent-performance'),
          fetch('/api/sessions').catch(() => ({ json: () => [] }))
        ]);

        const agents = perfRes.ok ? await perfRes.json() : [];
        const sessions = sessionsRes.ok ? await sessionsRes.json() : [];

        const eng = agents.filter(a => a.team === 'Engineering');
        const mkt = agents.filter(a => a.team === 'Marketing');
        const mgmt = agents.filter(a => a.team !== 'Engineering' && a.team !== 'Marketing');
        const activeSessions = (sessions || []).filter(s => ['pending', 'in_progress'].includes(s.status));

        document.getElementById('total-agents').textContent = agents.length || '‚Äî';
        document.getElementById('eng-count').textContent = eng.length || 10;
        document.getElementById('mkt-count').textContent = mkt.length || 10;
        document.getElementById('mgmt-count').textContent = mgmt.length || 4;
        document.getElementById('active-sessions').textContent = activeSessions.length;

        document.getElementById('mgmt-stat').textContent = mgmt.length || 4;
        document.getElementById('eng-stat').textContent = eng.length || 10;
        document.getElementById('mkt-stat').textContent = mkt.length || 10;
      } catch (e) {
        console.error('Error loading overview:', e);
      }
    }

    loadOverview();
    setInterval(loadOverview, 15000);
  </script>
</body>
</html>
