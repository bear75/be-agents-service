<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings - Agent Service</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .settings-container {
      max-width: 1800px;
      margin: 0 auto;
      padding: 20px;
    }

    .nav-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding: 20px 30px;
      background: var(--glass-white);
      backdrop-filter: blur(var(--glass-blur)) saturate(180%);
      border: 2px solid var(--glass-border);
      border-radius: var(--border-radius-lg);
      box-shadow: var(--shadow-lg);
    }

    .nav-header h1 {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 800;
      margin: 0;
    }

    .nav-links {
      display: flex;
      gap: 10px;
    }

    .nav-link {
      padding: 10px 20px;
      background: rgba(102, 126, 234, 0.1);
      border: 2px solid rgba(102, 126, 234, 0.2);
      border-radius: 8px;
      color: var(--text-primary);
      text-decoration: none;
      font-weight: 600;
      transition: all 0.2s;
    }

    .nav-link:hover {
      background: rgba(102, 126, 234, 0.2);
      transform: translateY(-2px);
    }

    .nav-link.active {
      background: #667eea;
      color: white;
      border-color: #667eea;
    }

    .btn {
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .btn-primary {
      background: #667eea;
      color: white;
    }

    .btn-secondary {
      background: #cbd5e0;
      color: #2d3748;
    }

    .integration-card {
      background: var(--glass-light);
      border: 2px solid var(--glass-border);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .integration-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .integration-name {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .integration-icon {
      font-size: 28px;
    }

    .integration-status {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
    }

    .status-active {
      background: #48bb78;
      color: white;
    }

    .status-inactive {
      background: #cbd5e0;
      color: #2d3748;
    }

    .integration-details {
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid var(--glass-border);
    }

    .config-field {
      margin-bottom: 15px;
    }

    .config-field label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: 6px;
    }

    .config-field input,
    .config-field textarea {
      width: 100%;
      padding: 10px 14px;
      background: var(--glass-light);
      border: 2px solid var(--glass-border);
      border-radius: 8px;
      color: var(--text-primary);
      font-size: 14px;
      font-family: inherit;
    }

    .config-field input:focus,
    .config-field textarea:focus {
      outline: none;
      border-color: #667eea;
    }

    .integration-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 28px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #cbd5e0;
      transition: 0.4s;
      border-radius: 28px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 20px;
      width: 20px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: #48bb78;
    }

    input:checked + .toggle-slider:before {
      transform: translateX(22px);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 30px 0 20px;
    }

    .integration-category {
      margin-bottom: 40px;
    }

    .category-title {
      font-size: 20px;
      font-weight: 800;
      color: var(--text-primary);
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 3px solid var(--glass-border);
    }
  </style>
</head>
<body>
  <div class="settings-container">
    <!-- Top Navigation Header -->
    <div class="nav-header">
      <h1>‚öôÔ∏è Settings</h1>
      <div class="nav-links">
        <a href="/management-team.html" class="nav-link">Management</a>
        <a href="/engineering.html" class="nav-link">Engineering</a>
        <a href="/sales-marketing.html" class="nav-link">Sales & Marketing</a>
        <a href="/rl-dashboard.html" class="nav-link">RL Dashboard</a>
        <a href="/kanban.html" class="nav-link">Task Board</a>
        <a href="/commands.html" class="nav-link">Docs & Commands</a>
        <a href="/settings.html" class="nav-link active">Settings</a>
      </div>
    </div>

    <!-- Section Header -->
    <div class="section-header">
      <h2 style="font-size: 24px; font-weight: 700; color: var(--text-primary); margin: 0;">Integrations & Settings</h2>
      <button class="btn btn-primary" onclick="refreshIntegrations()">üîÑ Refresh</button>
    </div>

      <!-- Messaging (WhatsApp/Telegram) -->
      <div class="integration-category" id="messaging-integrations">
        <h2 class="category-title">üí¨ Messaging Platforms (OpenClaw)</h2>
        <div id="messaging-list"></div>
      </div>

      <!-- Email Configuration -->
      <div class="integration-category" id="email-integrations">
        <h2 class="category-title">üìß Email Configuration</h2>
        <div id="email-list"></div>
      </div>

      <!-- Social Accounts -->
      <div class="integration-category" id="social-integrations">
        <h2 class="category-title">üì± Social Media Accounts</h2>
        <p style="color: rgba(255, 255, 255, 0.7); font-size: 13px; margin: -10px 0 20px 0;">
          Manage accounts for Caire, Eirtech.ai, and Bjorn Evers (personal)
        </p>
        <div id="social-list"></div>
      </div>

      <!-- API Keys -->
      <div class="integration-category" id="api-integrations">
        <h2 class="category-title">üîë API Keys & Services</h2>
        <div id="api-list"></div>
      </div>

      <!-- Tools & Platforms -->
      <div class="integration-category" id="tool-integrations">
        <h2 class="category-title">üõ†Ô∏è Tools & Platforms</h2>
        <div id="tool-list"></div>
      </div>
    </div>
  </div>
</div>

  <script>
    // Initialize
    async function init() {
      await loadIntegrations();
    }

    // Load all integrations
    async function loadIntegrations() {
      try {
        const response = await fetch('/api/integrations');
        const integrations = await response.json();

        // Group by type
        const messaging = integrations.filter(i => i.type === 'messaging');
        const email = integrations.filter(i => i.type === 'email');
        const social = integrations.filter(i => i.type === 'social');
        const api = integrations.filter(i => i.type === 'api');
        const tool = integrations.filter(i => i.type === 'tool');

        // Render each category
        renderIntegrations('messaging-list', messaging, {
          'whatsapp': 'üí¨',
          'telegram': '‚úàÔ∏è'
        });

        renderIntegrations('email-list', email, {
          'smtp': 'üìß',
          'imap': 'üì•'
        });

        renderIntegrations('social-list', social, {
          'linkedin': 'üíº',
          'twitter': '‚úï',
          'instagram': 'üì∏',
          'facebook': 'üìò'
        });

        renderIntegrations('api-list', api, {
          'openai': 'ü§ñ',
          'anthropic': 'üß†',
          'google': 'üîç'
        });

        renderIntegrations('tool-list', tool, {
          'notion': 'üìù',
          'github': 'üêô',
          'jira': 'üìã',
          'confluence': 'üìÑ',
          'hubspot': 'üî∂',
          'miro': 'üé®',
          'figma': 'üé≠',
          'slack': 'üí¨',
          'zapier': '‚ö°'
        });

      } catch (error) {
        console.error('Error loading integrations:', error);
      }
    }

    // Render integrations for a category
    function renderIntegrations(containerId, integrations, icons) {
      const container = document.getElementById(containerId);

      if (!integrations || integrations.length === 0) {
        container.innerHTML = '<div style="text-align: center; padding: 20px; color: var(--text-muted);">No integrations configured</div>';
        return;
      }

      container.innerHTML = integrations.map(integration => {
        const icon = icons[integration.platform] || 'üîå';
        const isActive = integration.is_active;
        const config = integration.config ? JSON.parse(integration.config) : {};
        const credentials = integration.credentials ? JSON.parse(integration.credentials) : {};

        return `
          <div class="integration-card">
            <div class="integration-header">
              <div class="integration-name">
                <span class="integration-icon">${icon}</span>
                ${integration.name}
              </div>
              <label class="toggle-switch">
                <input type="checkbox" ${isActive ? 'checked' : ''} onchange="toggleIntegration('${integration.id}', this.checked)">
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div class="integration-details">
              ${renderConfigFields(integration)}
            </div>

            <div class="integration-actions">
              <button class="btn btn-primary" onclick="saveIntegration('${integration.id}')">üíæ Save</button>
              <button class="btn btn-secondary" onclick="testConnection('${integration.id}')">üß™ Test Connection</button>
            </div>
          </div>
        `;
      }).join('');
    }

    // Render configuration fields based on platform
    function renderConfigFields(integration) {
      const platform = integration.platform;
      const config = integration.config ? JSON.parse(integration.config) : {};
      const credentials = integration.credentials ? JSON.parse(integration.credentials) : {};

      let fields = '';

      // Messaging Platforms (WhatsApp/Telegram via OpenClaw)
      if (integration.type === 'messaging') {
        const purpose = config.purpose || '';
        const setupGuide = config.setup_guide || '';

        if (platform === 'whatsapp') {
          fields = `
            <div class="config-field">
              <label>Status</label>
              <div style="padding: 10px; background: rgba(251, 191, 36, 0.1); border: 2px solid rgba(251, 191, 36, 0.3); border-radius: 8px;">
                <p style="margin: 0; color: var(--text-primary); font-size: 13px;">
                  üìã ${purpose}
                </p>
                <p style="margin: 8px 0 0 0; color: var(--text-muted); font-size: 12px;">
                  Setup: <code>openclaw channels login</code> then scan QR code with WhatsApp
                </p>
              </div>
            </div>
            <div class="config-field">
              <label>Documentation</label>
              <a href="/api/file?path=OPENCLAW_SETUP_GUIDE.md" target="_blank" style="color: #667eea; text-decoration: none; font-weight: 600;">
                üìñ View Complete Setup Guide
              </a>
            </div>
          `;
        } else if (platform === 'telegram') {
          fields = `
            <div class="config-field">
              <label>Bot Token</label>
              <input type="password" id="${integration.id}-bot-token" value="${credentials.bot_token || ''}" placeholder="Get from @BotFather on Telegram">
              <small style="color: var(--text-muted); font-size: 11px; display: block; margin-top: 4px;">
                Create bot: Send /newbot to @BotFather on Telegram
              </small>
            </div>
            <div class="config-field">
              <label>Status</label>
              <div style="padding: 10px; background: rgba(102, 126, 234, 0.1); border: 2px solid rgba(102, 126, 234, 0.3); border-radius: 8px;">
                <p style="margin: 0; color: var(--text-primary); font-size: 13px;">
                  üìã ${purpose}
                </p>
                <p style="margin: 8px 0 0 0; color: var(--text-muted); font-size: 12px;">
                  Setup: <code>openclaw channels add telegram --token YOUR_TOKEN</code>
                </p>
              </div>
            </div>
            <div class="config-field">
              <label>Documentation</label>
              <a href="/api/file?path=OPENCLAW_SETUP_GUIDE.md" target="_blank" style="color: #667eea; text-decoration: none; font-weight: 600;">
                üìñ View Complete Setup Guide
              </a>
            </div>
          `;
        }
      }

      // IMAP Email (for OpenClaw lead scraping)
      else if (platform === 'imap') {
        const purpose = config.purpose || '';
        const emailVar = config.email_var || '';
        const defaultUser = config.default_user || '';

        fields = `
          <div class="config-field">
            <label>Email Address</label>
            <input type="email" id="${integration.id}-user" value="${credentials.user || defaultUser}" placeholder="${defaultUser}">
            <small style="color: var(--text-muted); font-size: 11px; display: block; margin-top: 4px;">
              ${purpose} | Env var: ${emailVar}_USER
            </small>
          </div>
          <div class="config-field">
            <label>App Password (Gmail/Outlook)</label>
            <input type="password" id="${integration.id}-password" value="${credentials.password || ''}" placeholder="16-character app password">
            <small style="color: var(--text-muted); font-size: 11px; display: block; margin-top: 4px;">
              Generate at <a href="https://myaccount.google.com/apppasswords" target="_blank">Google App Passwords</a> | Env var: ${emailVar}_PASSWORD
            </small>
          </div>
          <div class="config-field">
            <label>IMAP Host</label>
            <input type="text" id="${integration.id}-imap-host" value="${config.imap_host || 'imap.gmail.com'}" placeholder="imap.gmail.com">
          </div>
          <div class="config-field">
            <label>IMAP Port</label>
            <input type="number" id="${integration.id}-imap-port" value="${config.imap_port || 993}" placeholder="993">
          </div>
        `;
      }

      // SMTP Email
      else if (platform === 'smtp') {
        fields = `
          <div class="config-field">
            <label>SMTP Host</label>
            <input type="text" id="${integration.id}-host" value="${config.host || ''}" placeholder="smtp.gmail.com">
          </div>
          <div class="config-field">
            <label>Port</label>
            <input type="number" id="${integration.id}-port" value="${config.port || '587'}" placeholder="587">
          </div>
          <div class="config-field">
            <label>From Email</label>
            <input type="email" id="${integration.id}-from" value="${config.from || ''}" placeholder="notifications@example.com">
          </div>
          <div class="config-field">
            <label>Username</label>
            <input type="text" id="${integration.id}-username" value="${credentials.username || ''}" placeholder="your-email@gmail.com">
          </div>
          <div class="config-field">
            <label>Password</label>
            <input type="password" id="${integration.id}-password" value="${credentials.password || ''}" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
          </div>
        `;
      }

      // Social Media (generic)
      else if (integration.type === 'social') {
        const brand = config.brand || 'unknown';
        const handle = config.handle || '';
        const pageUrl = config.page_url || config.profile_url || '';
        const purpose = config.purpose || '';
        const managedBy = config.managed_by || '';

        // Brand badge
        let brandBadge = '';
        if (brand === 'caire') {
          brandBadge = '<span style="background: #667eea; color: white; padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 700;">CAIRE</span>';
        } else if (brand === 'eirtech.ai') {
          brandBadge = '<span style="background: #48bb78; color: white; padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 700;">EIRTECH.AI</span>';
        } else if (brand === 'bjorbevers') {
          brandBadge = '<span style="background: #f59e0b; color: white; padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 700;">BJORN EVERS</span>';
        }

        fields = `
          <div class="config-field">
            <label>Brand</label>
            <div style="display: flex; align-items: center; gap: 10px;">
              ${brandBadge}
              ${handle ? `<code style="color: var(--text-secondary); font-size: 12px;">${handle}</code>` : ''}
            </div>
            ${purpose ? `<small style="color: var(--text-muted); font-size: 11px; display: block; margin-top: 4px;">${purpose}</small>` : ''}
          </div>
          <div class="config-field">
            <label>Access Token / API Key</label>
            <input type="password" id="${integration.id}-token" value="${credentials.access_token || credentials.api_key || ''}" placeholder="Enter access token">
            <small style="color: var(--text-muted); font-size: 11px; display: block; margin-top: 4px;">
              ${platform === 'linkedin' ? 'Get from: https://www.linkedin.com/developers/' : ''}
              ${platform === 'twitter' ? 'Get from: https://developer.x.com/' : ''}
              ${platform === 'instagram' ? 'Get from: https://developers.facebook.com/products/instagram/' : ''}
              ${platform === 'facebook' ? 'Get from: https://developers.facebook.com/' : ''}
            </small>
          </div>
          ${platform === 'linkedin' ? `
            <div class="config-field">
              <label>Organization/Company ID</label>
              <input type="text" id="${integration.id}-org-id" value="${config.org_id || ''}" placeholder="LinkedIn Organization ID">
              ${pageUrl ? `<small style="color: var(--text-muted); font-size: 11px; display: block; margin-top: 4px;">Page: ${pageUrl}</small>` : ''}
            </div>
          ` : ''}
          ${platform === 'twitter' ? `
            <div class="config-field">
              <label>API Key</label>
              <input type="password" id="${integration.id}-api-key" value="${credentials.api_key || ''}" placeholder="X API Key">
            </div>
            <div class="config-field">
              <label>API Secret</label>
              <input type="password" id="${integration.id}-api-secret" value="${credentials.api_secret || ''}" placeholder="X API Secret">
            </div>
            <div class="config-field">
              <label>Bearer Token</label>
              <input type="password" id="${integration.id}-bearer-token" value="${credentials.bearer_token || ''}" placeholder="X Bearer Token">
            </div>
          ` : ''}
          ${platform === 'instagram' || platform === 'facebook' ? `
            <div class="config-field">
              <label>Page/Account ID</label>
              <input type="text" id="${integration.id}-account-id" value="${config.account_id || ''}" placeholder="Account ID">
            </div>
          ` : ''}
          ${managedBy ? `
            <div class="config-field">
              <label>Managed By</label>
              <div style="color: var(--text-secondary); font-size: 13px;">Agent: ${managedBy}</div>
            </div>
          ` : ''}
        `;
      }

      // API Keys
      else if (integration.type === 'api') {
        fields = `
          <div class="config-field">
            <label>API Key</label>
            <input type="password" id="${integration.id}-api-key" value="${credentials.api_key || ''}" placeholder="sk-...">
          </div>
          ${platform === 'anthropic' ? `
            <div class="config-field">
              <label>Model Preference</label>
              <input type="text" id="${integration.id}-model" value="${config.model || 'claude-sonnet-4-5'}" placeholder="claude-sonnet-4-5">
            </div>
          ` : ''}
          ${platform === 'openai' ? `
            <div class="config-field">
              <label>Organization ID (optional)</label>
              <input type="text" id="${integration.id}-org" value="${config.organization || ''}" placeholder="org-...">
            </div>
          ` : ''}
        `;
      }

      // Tools
      else if (integration.type === 'tool') {
        if (platform === 'notion') {
          fields = `
            <div class="config-field">
              <label>Integration Token</label>
              <input type="password" id="${integration.id}-token" value="${credentials.token || ''}" placeholder="secret_...">
            </div>
            <div class="config-field">
              <label>Database ID</label>
              <input type="text" id="${integration.id}-database-id" value="${config.database_id || ''}" placeholder="Notion database ID">
            </div>
          `;
        } else if (platform === 'github') {
          fields = `
            <div class="config-field">
              <label>Personal Access Token</label>
              <input type="password" id="${integration.id}-token" value="${credentials.token || ''}" placeholder="ghp_...">
            </div>
            <div class="config-field">
              <label>Organization</label>
              <input type="text" id="${integration.id}-org" value="${config.organization || ''}" placeholder="your-org-name">
            </div>
          `;
        } else if (platform === 'jira') {
          fields = `
            <div class="config-field">
              <label>Base URL</label>
              <input type="text" id="${integration.id}-base-url" value="${config.base_url || 'https://caire.atlassian.net'}" placeholder="https://your-domain.atlassian.net">
            </div>
            <div class="config-field">
              <label>Email</label>
              <input type="email" id="${integration.id}-email" value="${credentials.email || ''}" placeholder="your-email@example.com">
            </div>
            <div class="config-field">
              <label>API Token</label>
              <input type="password" id="${integration.id}-token" value="${credentials.token || ''}" placeholder="Generate from Atlassian account">
            </div>
            <div class="config-field">
              <label>Project Key</label>
              <input type="text" id="${integration.id}-project-key" value="${config.project_key || ''}" placeholder="CAIRE">
            </div>
          `;
        } else if (platform === 'confluence') {
          fields = `
            <div class="config-field">
              <label>Base URL</label>
              <input type="text" id="${integration.id}-base-url" value="${config.base_url || 'https://caire.atlassian.net/wiki'}" placeholder="https://your-domain.atlassian.net/wiki">
            </div>
            <div class="config-field">
              <label>Email</label>
              <input type="email" id="${integration.id}-email" value="${credentials.email || ''}" placeholder="your-email@example.com">
            </div>
            <div class="config-field">
              <label>API Token</label>
              <input type="password" id="${integration.id}-token" value="${credentials.token || ''}" placeholder="Generate from Atlassian account">
            </div>
            <div class="config-field">
              <label>Space Key</label>
              <input type="text" id="${integration.id}-space-key" value="${config.space_key || 'TWC'}" placeholder="TWC">
            </div>
            <div class="config-field">
              <label>Parent Page ID</label>
              <input type="text" id="${integration.id}-parent-page-id" value="${config.parent_page_id || '393372'}" placeholder="393372">
            </div>
          `;
        } else if (platform === 'hubspot') {
          fields = `
            <div class="config-field">
              <label>API Key</label>
              <input type="password" id="${integration.id}-api-key" value="${credentials.api_key || ''}" placeholder="pat-na1-...">
            </div>
            <div class="config-field">
              <label>Portal ID (optional)</label>
              <input type="text" id="${integration.id}-portal-id" value="${config.portal_id || ''}" placeholder="12345678">
            </div>
          `;
        } else {
          fields = `
            <div class="config-field">
              <label>API Token</label>
              <input type="password" id="${integration.id}-token" value="${credentials.token || ''}" placeholder="Enter API token">
            </div>
          `;
        }
      }

      return fields || '<div style="color: var(--text-muted); font-style: italic;">No configuration required</div>';
    }

    // Toggle integration active status
    async function toggleIntegration(integrationId, isActive) {
      try {
        const response = await fetch(`/api/integrations/${integrationId}`, {
          method: 'PATCH',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ is_active: isActive })
        });

        const result = await response.json();

        if (response.ok) {
          console.log(`Integration ${integrationId} ${isActive ? 'activated' : 'deactivated'}`);
        } else {
          alert(`Error: ${result.error}`);
          await loadIntegrations(); // Reload to reset toggle
        }
      } catch (error) {
        alert(`Error: ${error.message}`);
        await loadIntegrations();
      }
    }

    // Save integration configuration
    async function saveIntegration(integrationId) {
      try {
        // Gather all input values for this integration
        const inputs = document.querySelectorAll(`[id^="${integrationId}-"]`);
        const config = {};
        const credentials = {};

        inputs.forEach(input => {
          const key = input.id.replace(`${integrationId}-`, '');
          const value = input.value;

          // Password/token fields go to credentials
          if (input.type === 'password' || key === 'token' || key === 'password' || key === 'api-key' || key === 'api-secret' || key === 'bearer-token' || key === 'bot-token' || key === 'username' || key === 'user') {
            credentials[key.replace(/-/g, '_')] = value;
          } else {
            config[key.replace(/-/g, '_')] = value;
          }
        });

        const response = await fetch(`/api/integrations/${integrationId}`, {
          method: 'PATCH',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            config: JSON.stringify(config),
            credentials: JSON.stringify(credentials)
          })
        });

        const result = await response.json();

        if (response.ok) {
          alert('‚úÖ Integration saved successfully!');
        } else {
          alert(`‚ùå Error: ${result.error}`);
        }
      } catch (error) {
        alert(`‚ùå Error: ${error.message}`);
      }
    }

    // Test connection
    async function testConnection(integrationId) {
      alert(`üß™ Testing connection for ${integrationId}...\n\nNote: Connection testing will be implemented in future updates.`);
    }

    // Refresh integrations
    async function refreshIntegrations() {
      await loadIntegrations();
    }

    // Initialize on load
    init();
  </script>
</body>
</html>
